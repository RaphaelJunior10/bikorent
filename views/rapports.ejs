<!-- Système d'onglets -->
<div class="tabs-container">
    <div class="tabs-header">
        <button class="tab-btn active" data-tab="proprietaire">
            <i class="fas fa-user-tie"></i> Propriétaire
        </button>
        <button class="tab-btn" data-tab="locataire">
            <i class="fas fa-user"></i> Locataire
        </button>
    </div>

    <!-- Onglet Propriétaire -->
    <div class="tab-content active" id="proprietaire">
        <!-- Barre d'outils -->
        <div class="toolbar">
            <div class="filter-container">
                <select id="periodeFilter" class="filter-select">
                    <option value="3">3 derniers mois</option>
                    <option value="6">6 derniers mois</option>
                    <option value="12">12 derniers mois</option>
                    <option value="24">2 dernières années</option>
                    <option value="60">5 dernières années</option>
                </select>
                <select id="proprieteFilter" class="filter-select">
                    <option value="all">Toutes les propriétés</option>
                    <option value="appartement">Appartements</option>
                    <option value="studio">Studios</option>
                    <option value="maison">Maisons</option>
                </select>
                <button class="btn-primary" id="exportBtn">
                    <i class="fas fa-download"></i> Exporter
                </button>
            </div>
        </div>

        <!-- Statistiques globales -->
        <div class="stats-cards">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-info">
                    <h3>Revenus Totaux</h3>
                    <p class="stat-number" id="revenusTotaux">€0</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <div class="stat-info">
                    <h3>Taux d'Occupation</h3>
                    <p class="stat-number" id="tauxOccupation">0%</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-building"></i>
                </div>
                <div class="stat-info">
                    <h3>Propriétés Actives</h3>
                    <p class="stat-number" id="proprietesActives">0</p>
                </div>
            </div>
            <!--<div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-trending-up"></i>
                </div>
                <div class="stat-info">
                    <h3>Croissance</h3>
                    <p class="stat-number" id="croissance">+0%</p>
                </div>
            </div>-->
        </div>

        <!-- Graphiques -->
        <div class="charts-container">
            <!-- Graphique global des revenus -->
            <div class="chart-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-area"></i> Évolution des Revenus Globaux</h2>
                </div>
                <div class="chart-container">
                    <canvas id="revenusGlobauxChart"></canvas>
                </div>
            </div>

            <!-- Graphiques par propriété -->
            <div class="chart-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> Analyse par Propriété</h2>
                </div>
                <div class="properties-charts" id="propertiesCharts">
                    <!-- Les graphiques par propriété seront générés ici -->
                </div>
            </div>
        </div>
    </div>

    <!-- Onglet Locataire -->
    <div class="tab-content" id="locataire">
        <!-- Barre d'outils -->
        <div class="toolbar">
            <div class="filter-container">
                <select id="periodeFilterLocataire" class="filter-select">
                    <option value="3">3 derniers mois</option>
                    <option value="6">6 derniers mois</option>
                    <option value="12">12 derniers mois</option>
                    <option value="24">2 dernières années</option>
                    <option value="60">5 dernières années</option>
                </select>
                <button class="btn-primary" id="exportLocataireBtn">
                    <i class="fas fa-download"></i> Exporter
                </button>
            </div>
        </div>

        <!-- Statistiques globales -->
        <div class="stats-cards">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-euro-sign"></i>
                </div>
                <div class="stat-info">
                    <h3>Dépenses Totales</h3>
                    <p class="stat-number" id="depensesTotales">€0</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="stat-info">
                    <h3>Propriétés Louées</h3>
                    <p class="stat-number" id="proprietesLouees">0</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="stat-info">
                    <h3>Paiements à Jour</h3>
                    <p class="stat-number" id="paiementsAJour">0</p>
                </div>
            </div>
            <!--<div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-trending-down"></i>
                </div>
                <div class="stat-info">
                    <h3>Économies</h3>
                    <p class="stat-number" id="economies">€0</p>
                </div>
            </div>-->
        </div>

        <!-- Graphiques -->
        <div class="charts-container">
            <!-- Graphique global des dépenses -->
            <div class="chart-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-area"></i> Évolution des Dépenses de Location</h2>
                </div>
                <div class="chart-container">
                    <canvas id="depensesGlobauxChart"></canvas>
                </div>
            </div>

            <!-- Graphiques par propriété louée -->
            <div class="chart-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> Analyse par Propriété Louée</h2>
                </div>
                <div class="properties-charts" id="locatairePropertiesCharts">
                    <!-- Les graphiques par propriété seront générés ici -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- eslint-disable-next-line -->
<script>
    // eslint-disable-next-line
    // @ts-ignore
    // eslint-disable-next-line no-undef
    window.rapportsData = <%- JSON.stringify(rapportsData) %>;
    console.log('Données passées depuis le contrôleur:', window.rapportsData);
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="/js/rapports.js"></script> 